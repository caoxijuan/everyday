<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Untitled Document</title>


    <style type="text/css">
        .one {
            background-color: #9bf7d5;
        }
        
        .two {
            background-color: #f3e99a;
        }
        
        .over {
            background-color: #ef7125;
        }
        
        table {
            border: #249bdb 1px solid;
            width: 500px;
            border-collapse: collapse;
        }
        
        table td {
            border: #249bdb 1px solid;
            padding: 10px;
        }
        
        table th {
            border: #249bdb 1px solid;
            padding: 10px;
            background-color: rgb(200, 200, 200);
        }
    </style>
</head>

<body>

    <table id="mailtable">
        <tr>
            <th>
                <input type="checkbox" name="all" />全选
            </th>
            <th>
                发件人
            </th>
            <th>
                邮件名称
            </th>
            <th>
                邮件附属信息
            </th>
        </tr>

        <tr class="one">
            <td>
                <input type="checkbox" name="mail" />
            </td>
            <td>
                张三11
            </td>
            <td>
                我是邮件11
            </td>
            <td>
                我是附属信息11
            </td>
        </tr>
        <tr class="two">
            <td>
                <input type="checkbox" name="mail" />
            </td>
            <td>
                张三22
            </td>
            <td>
                我是邮件22
            </td>
            <td>
                我是附属信息22
            </td>
        </tr>
        <tr class="one">
            <td>
                <input type="checkbox" name="mail" />
            </td>
            <td>
                张三33
            </td>
            <td>
                我是邮件33
            </td>
            <td>
                我是附属信息33
            </td>
        </tr>
        <tr class="two">
            <td>
                <input type="checkbox" name="mail" />
            </td>
            <td>
                张三44
            </td>
            <td>
                我是邮件44
            </td>
            <td>
                我是附属信息44
            </td>
        </tr>

        <tr>
            <th>

            </th>
            <th colspan="3">
                <input type="button" value="全选" />
                <input type="button" value="取消全选" />
                <input type="button" value="反选" />

            </th>
        </tr>
    </table>
    <script>
        // 1.勾选全选复选框，列表中的选项都被选中，取消全选复选框的勾选，列表中的选项都被取消选中
        // 2.点击全选按钮，列表中的选项都被选中
        // 3.点击取消全选按钮，列表中的选项都被取消选中
        // 4.点击反选按钮，列表中选项选结果呈相反选中结果（原来选择的都取消选择，原来未选择的都变为选择）
        //上面那个全选按钮
        let oneAll = document.querySelector('#mailtable tr:first-child th:first-child input')
            //下面那个全选按钮
        let all = document.querySelector('#mailtable tr:last-child th:last-child input:first-child')
            //取消全选
        let noAll = document.querySelector('#mailtable tr:last-child th:last-child input:nth-child(2)')
            //反选
        let no = document.querySelector('#mailtable tr:last-child th:last-child input:nth-child(3)')
            //选项
        let inp = document.querySelectorAll('#mailtable tr td:first-child input')
            //1、给全选按钮添加事件
        oneAll.onclick = function() {
            //遍历每项的复选框
            for (let i = 0; i < inp.length; i++) {
                //让每项复选框的checked属性和全选复选框的checked一样
                inp[i].checked = this.checked
            }
        }

        //2、遍历每项复选框
        for (let j = 0; j < inp.length; j++) {
            //给每项复选框添加点击事件
            inp[j].onclick = function() {
                //假设每项都选中
                let flag = true
                    //通过遍历，看看是否每项真的都选中
                for (let k = 0; k < inp.length; k++) {
                    //如果有一项没选中，就让flag=false
                    if (!inp[k].checked) {
                        //只要出现一项没选中，那么就说明全选复选框也不能选中，立马停止执行循环
                        flag = false
                        break
                    }
                }
                //让全选框的值=flag
                oneAll.checked = flag
            }
        }
        // 点击全选按钮，列表中的选项都被选中
        all.onclick = function() {
                //列表中的按钮都选中
                for (let i = 0; i < inp.length; i++) {
                    inp[i].checked = true
                }
                //全选复选框选中
                oneAll.checked = true
            }
            //给取消全选按钮添加点击事件
        noAll.onclick = function() {
            //遍历每项，让每项都不选中
            for (let i = 0; i < inp.length; i++) {
                inp[i].checked = false
            }
            oneAll.checked = false
        }
        no.onclick = function() {
            for (let i = 0; i < inp.length; i++) {
                inp[i].checked = !inp[i].checked
            }
            oneAll.checked = !oneAll.checked
        }
    </script>
</body>

</html>